<html>
<script type='text/x-mathjax-config'>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath:  [ ['@(@','@)@'] ] ,
    displayMath: [ ['@[@','@]@'] ]
  }
});
</script>
<script type='text/javascript' src=
'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=default'
>
</script>
<head>
<title>The CppAD Wish List</title>
<meta http-equiv='Content-Type' content='text/html' charset='utf-8'>
<meta name="description" id="description" content="The CppAD Wish List">
<meta name="keywords" id="keywords" content=" the cppad wish list see also purpose base2ad dynamic parameters comparison operators vecad vectors graph reverse mode atomic examples abs-normal functions return cancellation cppad_lib requirement inline compilation speed checkpoint tapeless ad re-taping testing subgraph forward sparsity check_finite test_boolofvoid example optimization taping special base requirements adolc recomputation iterator interface tracing atan2 ">
<style type='text/css'>
body { color : black }
body { background-color : white }
A:link { color : blue }
A:visited { color : purple }
A:active { color : purple }
</style>
<script type='text/javascript' language='JavaScript' src='_wish_list_htm.js'>
</script>
</head>
<body>
<table><tr>
<td>
<a href="https://coin-or.github.io/CppAD" target="_top"><img border="0" src="_image.gif"></a>
</td>
<td><a href="bib.htm" target="_top">Prev</a>
</td><td><a href="whats_new.htm" target="_top">Next</a>
</td><td>
<select onchange='choose_across0(this)'>
<option>Index-&gt;</option>
<option>contents</option>
<option>reference</option>
<option>index</option>
<option>search</option>
<option>external</option>
</select>
</td>
<td>
<select onchange='choose_up0(this)'>
<option>Up-&gt;</option>
<option>CppAD</option>
<option>Appendix</option>
<option>wish_list</option>
</select>
</td>
<td>
<script type='text/javascript' language='JavaScript' src='_childtable_cppad_htm.js'></script>
</td>
<td>
<script type='text/javascript' language='JavaScript' src='_childtable_appendix_htm.js'></script>
</td>
<td>wish_list</td>
<td>
<select onchange='choose_current0(this)'>
<option>Headings-&gt;</option>
<option>See Also</option>
<option>Purpose</option>
<option>base2ad</option>
<option>Dynamic Parameters</option>
<option>---..Comparison Operators</option>
<option>---..VecAD Vectors</option>
<option>Graph Operators</option>
<option>Reverse Mode</option>
<option>Atomic Examples</option>
<option>Abs-normal</option>
<option>---..Atomic Functions</option>
<option>---..Return Functions</option>
<option>---..Cancellation</option>
<option>cppad_lib</option>
<option>---..Requirement</option>
<option>---..inline</option>
<option>---..Compilation Speed</option>
<option>checkpoint</option>
<option>---..Tapeless AD</option>
<option>---..Re-taping</option>
<option>---..Testing</option>
<option>Subgraph</option>
<option>---..Forward Mode</option>
<option>---..Sparsity</option>
<option>check_finite</option>
<option>test_boolofvoid</option>
<option>Example</option>
<option>Optimization</option>
<option>---..Atomic Functions</option>
<option>---..Taping</option>
<option>---..Special Operators</option>
<option>Base Requirements</option>
<option>Adolc</option>
<option>Forward Mode Recomputation</option>
<option>Iterator Interface</option>
<option>Tracing</option>
<option>atan2</option>
</select>
</td>
</tr></table><br>
@(@\newcommand{\W}[1]{ \; #1 \; }
\newcommand{\R}[1]{ {\rm #1} }
\newcommand{\B}[1]{ {\bf #1} }
\newcommand{\D}[2]{ \frac{\partial #1}{\partial #2} }
\newcommand{\DD}[3]{ \frac{\partial^2 #1}{\partial #2 \partial #3} }
\newcommand{\Dpow}[2]{ \frac{\partial^{#1}}{\partial  {#2}^{#1}} }
\newcommand{\dpow}[2]{ \frac{ {\rm d}^{#1}}{{\rm d}\, {#2}^{#1}} }@)@



<b>This is cppad-20221105 documentation</b>. Here is a link to its
<a href="https://cppad.readthedocs.io/en/latest/user_guide.html" target="_top"><span style='white-space: nowrap'>current&nbsp;documentation</span></a>
.

<center><b><big><big>The CppAD Wish List</big></big></b></center>
<br>
<b><big><a name="See Also" id="See Also">See Also</a></big></b>

<br>
<a href="research.htm" target="_top"><span style='white-space: nowrap'>research</span></a>


<br>
<br>
<b><big><a name="Purpose" id="Purpose">Purpose</a></big></b>
<br>
The items on this list are improvements and extensions to CppAD
that are currently being considered.

<br>
<br>
<b><big><a name="base2ad" id="base2ad">base2ad</a></big></b>
<br>
It would be nice if <a href="base2ad.htm" target="_top"><span style='white-space: nowrap'>base2ad</span></a>
 functioned as expected with
<a href="vecad.htm" target="_top"><span style='white-space: nowrap'>VecAD</span></a>
 operations; see <a href="base2vec_ad.cpp.htm" target="_top"><span style='white-space: nowrap'>base2vec_ad.cpp</span></a>
.

<br>
<br>
<b><big><a name="Dynamic Parameters" id="Dynamic Parameters">Dynamic Parameters</a></big></b>


<br>
<br>
<big><a name="Dynamic Parameters.Comparison Operators" id="Dynamic Parameters.Comparison Operators">Comparison Operators</a></big>
<br>
The comparisons for dynamic parameters are not being included
in the <a href="independent.htm#record_compare" target="_top"><span style='white-space: nowrap'>record_compare</span></a>
 is true.
This should be fixed and included in the
<a href="compare_change.htm#number" target="_top"><span style='white-space: nowrap'>number</span></a>
 returned by

<code><i><font color="black"><span style='white-space: nowrap'>f</span></font></i><font color="blue"><span style='white-space: nowrap'>.compare_change</span></font></code>
.
In addition, we will need a way to know if
<a href="compare_change.htm#op_index" target="_top"><span style='white-space: nowrap'>op_index</span></a>
 corresponds to a
variable or dynamic parameter operator.

<br>
<br>
<big><a name="Dynamic Parameters.VecAD Vectors" id="Dynamic Parameters.VecAD Vectors">VecAD Vectors</a></big>
<br>
Currently, when a <a href="vecad.htm" target="_top"><span style='white-space: nowrap'>VecAD</span></a>
 vector only depends on dynamic parameters
it becomes a variable; see <a href="vecad.htm#Efficiency" target="_top"><span style='white-space: nowrap'>efficiency</span></a>
.
This is a simple solution to the problem of having to pass the state of
a vector, when it becomes a variable,
from a dynamic sweep to a zero order forward mode sweep.

<br>
<br>
<b><big><a name="Graph Operators" id="Graph Operators">Graph Operators</a></big></b>
<br>
The <a href="graph_op_enum.htm#Missing Operators" target="_top"><span style='white-space: nowrap'>missing&nbsp;operators</span></a>
 should be
implemented so that they can be include in conversion between <a href="adfun.htm" target="_top"><span style='white-space: nowrap'>ADFun</span></a>

objects and the AD graphs; see <a href="cpp_ad_graph.htm" target="_top"><span style='white-space: nowrap'>cpp_ad_graph</span></a>
, <a href="json_ad_graph.htm" target="_top"><span style='white-space: nowrap'>json_ad_graph</span></a>
.

<br>
<br>
<b><big><a name="Reverse Mode" id="Reverse Mode">Reverse Mode</a></big></b>
<br>
Reverse mode calculation of the function
<small>@(@
f : \B{R} \rightarrow \B{R}
@)@</small>  defined by <small>@(@
y = f(x)
@)@</small> where

<code><font color="blue"><span style='white-space: nowrap'><br>
&nbsp;&nbsp;&nbsp;&nbsp;</span></font><i><font color="black"><span style='white-space: nowrap'>ay</span></font></i><font color="blue"><span style='white-space: nowrap'>[0]&nbsp;=&nbsp;pow(</span></font><i><font color="black"><span style='white-space: nowrap'>ax</span></font></i><font color="blue"><span style='white-space: nowrap'>[0],&nbsp;0.5)&nbsp;*&nbsp;pow(</span></font><i><font color="black"><span style='white-space: nowrap'>ax</span></font></i><font color="blue"><span style='white-space: nowrap'>[0],&nbsp;0.5)<br>
</span></font></code>
yields the result zero when <small>@(@
x_0 = 0
@)@</small>;
see the file <code><font color="blue">bug/pow.sh</font></code>.
This is a feature of using <a href="azmul.htm" target="_top"><span style='white-space: nowrap'>azmul</span></a>
 to select which components of
a function are differentiated.
This enables one component to yield <a href="nan.htm" target="_top"><span style='white-space: nowrap'>nan</span></a>
 for a partial derivative
while another might not.
If a separate flag was used for which variables are selected,
reverse mode multiplications would not need to be converted to <code><font color="blue">azmul</font></code>
and the function above would return <code><font color="blue">nan</font></code> for the derivative value.
This may also be faster that using <code><font color="blue">azmul</font></code>.

<br>
<br>
<b><big><a name="Atomic Examples" id="Atomic Examples">Atomic Examples</a></big></b>
<br>
Convert the remaining
<a href="atomic_two_example.htm" target="_top"><span style='white-space: nowrap'>atomic_two_examples</span></a>
, and
<a href="atomic_three_example.htm" target="_top"><span style='white-space: nowrap'>atomic_three_examples</span></a>

to use the <a href="atomic_four.htm" target="_top"><span style='white-space: nowrap'>atomic_four</span></a>
 interface.


<br>
<br>
<b><big><a name="Abs-normal" id="Abs-normal">Abs-normal</a></big></b>


<br>
<br>
<big><a name="Abs-normal.Atomic Functions" id="Abs-normal.Atomic Functions">Atomic Functions</a></big>
<br>
The <a href="abs_normal_fun.htm" target="_top"><span style='white-space: nowrap'>abs_normal_fun</span></a>
 conversion does not handle
atomic functions. This should be fixed.

<br>
<br>
<big><a name="Abs-normal.Return Functions" id="Abs-normal.Return Functions">Return Functions</a></big>
<br>
Change the <a href="abs_normal_fun.htm" target="_top"><span style='white-space: nowrap'>abs_normal_fun</span></a>
 to return the functions
<a href="abs_normal_fun.htm#g.z(x, u)" target="_top"><span style='white-space: nowrap'>z(x,&nbsp;u)</span></a>
 and
<a href="abs_normal_fun.htm#g.y(x, u)" target="_top"><span style='white-space: nowrap'>y(x,&nbsp;u)</span></a>
 instead of
<small>@(@
g(x, u)
@)@</small> and <small>@(@
a(x)
@)@</small>.
We can add a utility that computes <small>@(@
a(x)
@)@</small> using
<small>@(@
z(x, u)
@)@</small>, <small>@(@
a_i (x) = | z_i (x, a(x) ) |
@)@</small>
and <small>@(@
z_i
@)@</small> does not depends on <small>@(@
u_j
@)@</small> for <small>@(@
j \geq i
@)@</small>.

<br>
<br>
<big><a name="Abs-normal.Cancellation" id="Abs-normal.Cancellation">Cancellation</a></big>
<br>
Avoid cancellation when computing the difference in the absolute value
function at the current point <small>@(@
\hat{x}
@)@</small> the displaced point
<small>@(@
x = \hat{x} + \Delta x
@)@</small>; i.e.,
<small>@[@

    |z_i (x, \tilde{a}(x) ) | - |z_i (\hat{x}, a(\hat{x}) ) |

@]@</small>


<br>
<br>
<b><big><a name="cppad_lib" id="cppad_lib">cppad_lib</a></big></b>


<br>
<br>
<big><a name="cppad_lib.Requirement" id="cppad_lib.Requirement">Requirement</a></big>
<br>
Currently <code><font color="blue">cppad_lib</font></code> library is only needed if one uses
<a href="colpack_prefix.htm" target="_top"><span style='white-space: nowrap'>colpack</span></a>
,
<a href="json_ad_graph.htm" target="_top"><span style='white-space: nowrap'>json_ad_graph</span></a>
,
<a href="cpp_ad_graph.htm" target="_top"><span style='white-space: nowrap'>cpp_ad_graph</span></a>
, or
<a href="code_gen_fun.htm" target="_top"><span style='white-space: nowrap'>code_gen_fun</span></a>
..

<br>
<br>
<big><a name="cppad_lib.inline" id="cppad_lib.inline">inline</a></big>
<br>
The C++ <code><font color="blue">inline</font></code> specifier is used to avoid multiple copies
of functions (that are not templates) during the link process.
Perhaps some of these functions should be regular functions and part
in the <a href="colpack_prefix.htm#cppad_lib" target="_top"><span style='white-space: nowrap'>cppad_lib</span></a>
 library.

<br>
<br>
<big><a name="cppad_lib.Compilation Speed" id="cppad_lib.Compilation Speed">Compilation Speed</a></big>
<br>
Perhaps complication speed when using <code><font color="blue">AD&lt;double&gt;</font></code>
could significantly be increased by including some of it's member functions
in the cppad_lib library.



<br>
<br>
<b><big><a name="checkpoint" id="checkpoint">checkpoint</a></big></b>


<br>
<br>
<big><a name="checkpoint.Tapeless AD" id="checkpoint.Tapeless AD">Tapeless AD</a></big>
<br>
Perhaps there should be a version of the
<a href="chkpoint_two.htm" target="_top"><span style='white-space: nowrap'>chkpoint_two</span></a>

class that uses a tapeless AD package to compute
the derivative values.
This would allow for algorithms where the operations sequence
depends on the independent variable values.
There is a question as to how sparsity patterns would be determined
in this case.
Perhaps they would be passed into the constructor.
If it was known to be constant,
the user could compute the pattern using CppAD.
Otherwise, the user could input
a conservative estimate of the pattern that would be correct.

<br>
<br>
<big><a name="checkpoint.Re-taping" id="checkpoint.Re-taping">Re-taping</a></big>
<br>
Perhaps the <code><font color="blue">checkpoint</font></code> class should allow for re-taping
derivative values.
This would also allow for algorithms where the operations sequence
depends on the independent variable values.
Perhaps (as for tapeless entry above)
the sparsity pattern should be passed into the constructor.

<br>
<br>
<big><a name="checkpoint.Testing" id="checkpoint.Testing">Testing</a></big>
<br>
There should be some examples and tests for both speed and memory use
that demonstrate that checkpointing is useful.


<br>
<br>
<b><big><a name="Subgraph" id="Subgraph">Subgraph</a></big></b>


<br>
<br>
<big><a name="Subgraph.Forward Mode" id="Subgraph.Forward Mode">Forward Mode</a></big>
<br>
The <a href="subgraph_jac_rev.htm" target="_top"><span style='white-space: nowrap'>subgraph_jac_rev</span></a>
 routine computes sparsity patterns
of Jacobians using reverse mode.
It is possible that a forward mode version of this method would be
better for some cases.

<br>
<br>
<big><a name="Subgraph.Sparsity" id="Subgraph.Sparsity">Sparsity</a></big>
<br>
The <a href="subgraph_sparsity.htm" target="_top"><span style='white-space: nowrap'>subgraph_sparsity</span></a>
 calculation treats
each atomic function call as if
all of its outputs depend on all of its inputs;
see <a href="subgraph_sparsity.htm#Atomic Function" target="_top"><span style='white-space: nowrap'>atomic&nbsp;function</span></a>
.
These sparsity patterns could be made more efficient
(could have fewer possibly non-zeros entries)
by using the sparsity patterns for the atomic functions.



<br>
<br>
<b><big><a name="check_finite" id="check_finite">check_finite</a></big></b>

<ol type="1"><li>
Sometimes one only gets infinite value during zero order forward
and nan when computing corresponding derivatives.
Change <a href="check_for_nan.htm" target="_top"><span style='white-space: nowrap'>check_for_nan</span></a>
 to <code><font color="blue">check_finite</font></code>
(not infinite or nan) so that error detection happens during zero
order forward instead of later.
</li><li>

In addition, the current <a href="check_for_nan.htm" target="_top"><span style='white-space: nowrap'>check_for_nan</span></a>
 writes the corresponding
zero order values to a temporary file.
It would be nice if the <code><font color="blue">check_finite</font></code> routine made writing
the zero order values optional.
</li></ol>


<br>
<br>
<b><big><a name="test_boolofvoid" id="test_boolofvoid">test_boolofvoid</a></big></b>
<br>
For general purpose use, the <a href="test_boolofvoid.htm" target="_top"><span style='white-space: nowrap'>test_boolofvoid</span></a>
 should be usable
without including a memory check at the end.

<br>
<br>
<b><big><a name="Example" id="Example">Example</a></big></b>
<br>
Split the <a href="listallexamples.htm" target="_top"><span style='white-space: nowrap'>example&nbsp;list</span></a>

into separate groups by the corresponding example subdirectory.


<br>
<br>
<b><big><a name="Optimization" id="Optimization">Optimization</a></big></b>


<br>
<br>
<big><a name="Optimization.Atomic Functions" id="Optimization.Atomic Functions">Atomic Functions</a></big>
<br>
There is some confusion as to the value of the Taylor coefficients
for atomic function arguments and results that have been optimized out.
See <a href="optimize.htm#Atomic Functions" target="_top"><span style='white-space: nowrap'>atomic&nbsp;functions</span></a>
 in optimize,
<a href="whats_new_21.htm#02-16" target="_top"><span style='white-space: nowrap'>02-16</span></a>
 in whats new for 2021,
<a href="atomic_three_rev_depend.htm#depend_x.Optimize" target="_top"><span style='white-space: nowrap'>optimize</span></a>

in atomic_three, and
<a href="atomic_four_rev_depend.htm#depend_x.Optimize" target="_top"><span style='white-space: nowrap'>optimize</span></a>
 in atomic_four.

<br>
<br>
<big><a name="Optimization.Taping" id="Optimization.Taping">Taping</a></big>
<br>
Perhaps some of the optimization done while taping forward mode
should be delayed to the <code><font color="blue">optimization</font></code> step.

<br>
<br>
<big><a name="Optimization.Special Operators" id="Optimization.Special Operators">Special Operators</a></big>
<br>
Add special operators that can be implemented more efficiently, e.g.,

<code><font color="blue"><span style='white-space: nowrap'><br>
&nbsp;&nbsp;&nbsp;&nbsp;square(</span></font><i><font color="black"><span style='white-space: nowrap'>x</span></font></i><font color="blue"><span style='white-space: nowrap'>)&nbsp;=&nbsp;</span></font><i><font color="black"><span style='white-space: nowrap'>x</span></font></i><font color="blue"><span style='white-space: nowrap'>&nbsp;*&nbsp;</span></font><i><font color="black"><span style='white-space: nowrap'>x</span></font></i><font color="blue"><span style='white-space: nowrap'><br>
</span></font></code>
and have the optimizer recognize when they should be used.
(They could also be in the user API, but it would not be expected
that the user would use them.)



<br>
<br>
<b><big><a name="Base Requirements" id="Base Requirements">Base Requirements</a></big></b>
<br>
Change the <a href="base_require.htm" target="_top"><span style='white-space: nowrap'>Base&nbsp;requirements</span></a>
 to use template
specialization instead of functions so that there is a default value
for each function. The default would result in a
<a href="cppad_assert.htm#Known" target="_top"><span style='white-space: nowrap'>known</span></a>
 assert when the operation is used and not
defined by the base class.
An example of this type of template specialization can be found in
the implementation of <a href="to_string.htm" target="_top"><span style='white-space: nowrap'>to_string</span></a>
.

<br>
<br>
<b><big><a name="Adolc" id="Adolc">Adolc</a></big></b>
<br>
Create a documentation page that shows how to convert Adolc commands to
CppAD commands.

<br>
<br>
<b><big><a name="Forward Mode Recomputation" id="Forward Mode Recomputation">Forward Mode Recomputation</a></big></b>
<br>
If the results of <a href="forward_order.htm" target="_top"><span style='white-space: nowrap'>forward_order</span></a>
 have already been computed and are still
stored in the <a href="adfun.htm" target="_top"><span style='white-space: nowrap'>ADFun</span></a>
 object (see <a href="size_order.htm" target="_top"><span style='white-space: nowrap'>size_order</span></a>
),
then they do not need to be recomputed and the results can just be returned.

<br>
<br>
<b><big><a name="Iterator Interface" id="Iterator Interface">Iterator Interface</a></big></b>
<br>
All of the CppAD simple vector interfaces should also have an
iterator version for the following reasons:
<ol type="1"><li>
It would not be necessary to copy information to simple vectors
when it was originally stored in a different type of container.
</li><li>

It would not be necessary to reallocate memory for a result that is
repeatedly calculated
(because an iterator for the result container would be passed in).
</li></ol>


<br>
<br>
<b><big><a name="Tracing" id="Tracing">Tracing</a></big></b>
<br>
Add tracing the operation sequence to the user API and documentation.
Tracing the operation sequence is currently done by changing the CppAD
source code. Use the command
<code><font color='blue'><pre style='display:inline'> 
    grep '^# *define *CPPAD_.*_TRACE' cppad/local/sweep*.hpp
</pre></font></code>
to find all the possible tracing flags.

<br>
<br>
<b><big><a name="atan2" id="atan2">atan2</a></big></b>
<br>
The <a href="atan2.htm" target="_top"><span style='white-space: nowrap'>atan2</span></a>
 function could be made faster by adding
a special operator for it.


<hr>Input File: omh/appendix/wish_list.omh

</body>
</html>
