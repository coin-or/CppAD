<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="Faq, frequently, asked, questions, and, answers" name="keywords" />
<meta content="assignment, and, independent" name="keywords" />
<meta content="bugs" name="keywords" />
<meta content="comparechange" name="keywords" />
<meta content="complex, types" name="keywords" />
<meta content="exceptions" name="keywords" />
<meta content="independent, variables" name="keywords" />
<meta content="matrix, inverse" name="keywords" />
<meta content="lusolve" name="keywords" />
<meta content="atomic, operation" name="keywords" />
<meta content="mode:, forward, or, reverse" name="keywords" />
<meta content="namespace" name="keywords" />
<meta content="test, vector, preprocessor, symbol" name="keywords" />
<meta content="speed" name="keywords" />
<meta content="ndebug" name="keywords" />
<meta content="optimize" name="keywords" />
<meta content="memory, allocation" name="keywords" />
<meta content="tape, storage:, disk, or, memory" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Faq &mdash; cppad  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="directory" href="directory.html" />
    <link rel="prev" title="Appendix" href="Appendix.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="xrst_root_doc.html" class="icon icon-home"> cppad
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="xrst_table_of_contents.html">Table of Contents</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="CppAD.html">CppAD</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Install.html">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="Theory.html">Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="AD.html">AD</a></li>
<li class="toctree-l2"><a class="reference internal" href="ADFun.html">ADFun</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessor.html">preprocessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_thread.html">multi_thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="utility.html">utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipopt_solve.html">ipopt_solve</a></li>
<li class="toctree-l2"><a class="reference internal" href="Example.html">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="speed.html">speed</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Appendix.html">Appendix</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Faq</a></li>
<li class="toctree-l3"><a class="reference internal" href="directory.html">directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="glossary.html">glossary</a></li>
<li class="toctree-l3"><a class="reference internal" href="Bib.html">Bib</a></li>
<li class="toctree-l3"><a class="reference internal" href="wish_list.html">wish_list</a></li>
<li class="toctree-l3"><a class="reference internal" href="whats_new.html">whats_new</a></li>
<li class="toctree-l3"><a class="reference internal" href="deprecated.html">deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="compare_c.html">compare_c</a></li>
<li class="toctree-l3"><a class="reference internal" href="numeric_ad.html">numeric_ad</a></li>
<li class="toctree-l3"><a class="reference internal" href="addon.html">addon</a></li>
<li class="toctree-l3"><a class="reference internal" href="License.html">License</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xrst_index.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="xrst_root_doc.html">cppad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="xrst_root_doc.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="CppAD.html">CppAD</a> &raquo;</li>
          <li><a href="Appendix.html">Appendix</a> &raquo;</li>
      <li>Faq</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Faq.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p class="hidden"><span class="math notranslate nohighlight">\(\newcommand{\W}[1]{ \; #1 \; }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\R}[1]{ {\rm #1} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\B}[1]{ {\bf #1} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\D}[2]{ \frac{\partial #1}{\partial #2} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\DD}[3]{ \frac{\partial^2 #1}{\partial #2 \partial #3} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\Dpow}[2]{ \frac{\partial^{#1}}{\partial  {#2}^{#1}} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\dpow}[2]{ \frac{ {\rm d}^{#1}}{{\rm d}\, {#2}^{#1}} }\)</span></p>
<section id="faq">
<span id="faq-name"></span><h1>Faq<a class="headerlink" href="#faq" title="Permalink to this headline"></a></h1>
<section id="frequently-asked-questions-and-answers">
<span id="faq-title"></span><span id="index-0"></span><h2>Frequently Asked Questions and Answers<a class="headerlink" href="#frequently-asked-questions-and-answers" title="Permalink to this headline"></a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#assignment-and-independent" id="id1">Assignment and Independent</a></p></li>
<li><p><a class="reference internal" href="#bugs" id="id2">Bugs</a></p></li>
<li><p><a class="reference internal" href="#comparechange" id="id3">CompareChange</a></p></li>
<li><p><a class="reference internal" href="#complex-types" id="id4">Complex Types</a></p></li>
<li><p><a class="reference internal" href="#exceptions" id="id5">Exceptions</a></p></li>
<li><p><a class="reference internal" href="#independent-variables" id="id6">Independent Variables</a></p></li>
<li><p><a class="reference internal" href="#matrix-inverse" id="id7">Matrix Inverse</a></p>
<ul>
<li><p><a class="reference internal" href="#lusolve" id="id8">LuSolve</a></p></li>
<li><p><a class="reference internal" href="#atomic-operation" id="id9">Atomic Operation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#mode-forward-or-reverse" id="id10">Mode: Forward or Reverse</a></p></li>
<li><p><a class="reference internal" href="#namespace" id="id11">Namespace</a></p>
<ul>
<li><p><a class="reference internal" href="#test-vector-preprocessor-symbol" id="id12">Test Vector Preprocessor Symbol</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#speed" id="id13">Speed</a></p>
<ul>
<li><p><a class="reference internal" href="#ndebug" id="id14">NDEBUG</a></p></li>
<li><p><a class="reference internal" href="#optimize" id="id15">Optimize</a></p></li>
<li><p><a class="reference internal" href="#memory-allocation" id="id16">Memory Allocation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tape-storage-disk-or-memory" id="id17">Tape Storage: Disk or Memory</a></p></li>
</ul>
</div>
<section id="assignment-and-independent">
<span id="faq-assignment-and-independent"></span><span id="index-1"></span><h3><a class="toc-backref" href="#id1">Assignment and Independent</a><a class="headerlink" href="#assignment-and-independent" title="Permalink to this headline"></a></h3>
<p>Why does the code sequence</p>
<div class="line-block">
<div class="line">      <code class="docutils literal notranslate"><span class="pre">Independent</span></code> ( <em>u</em> );</div>
<div class="line">      <em>v</em> = <em>u</em> [0];</div>
</div>
<p>behave differently from the code sequence</p>
<div class="line-block">
<div class="line">      <em>v</em> = <em>u</em> [0];</div>
<div class="line">      <code class="docutils literal notranslate"><span class="pre">Independent</span></code> ( <em>u</em> );</div>
</div>
<p>Before the call to <a class="reference internal" href="Independent.html#independent-name"><span class="std std-ref">Independent</span></a> ,
<em>u</em> [0] is a <a class="reference internal" href="glossary.html#glossary-parameter"><span class="std std-ref">Parameter</span></a>
and after the call it is a variable.
Thus in the first case, <em>v</em> is a variable
and in the second case it is a parameter.</p>
</section>
<section id="bugs">
<span id="faq-bugs"></span><span id="index-2"></span><h3><a class="toc-backref" href="#id2">Bugs</a><a class="headerlink" href="#bugs" title="Permalink to this headline"></a></h3>
<p>What should I do if I suspect that there is a bug in CppAD ?</p>
<ol class="arabic simple">
<li><p>The first step is to check currently open
<a class="reference external" href="https://github.com/coin-or/CppAD/issues">issues</a> on github.
If it is an open issue, and you want to hurry it along, you can add
a comment to the effect that it is holding you up.</p></li>
<li><p>The next step is to search the
<a class="reference internal" href="whats_new.html#whats-new-name"><span class="std std-ref">whats_new</span></a> sections for mention of a related bug fix
between the date of the version you are using and the current date.
It the bug has been fixed, obtain a more recent release that has the fix
and see if that works for you.</p></li>
<li><p>The next step is to
create a simple demonstration of the bug;
see the file <code class="docutils literal notranslate"><span class="pre">bug/template.sh</span></code> for a template that you can
edit for that purpose.
The smaller the program, the better the bug report.</p></li>
<li><p>The next step is open a new issue on github and provide your simple
example so that the problem can be reproduced.</p></li>
</ol>
</section>
<section id="comparechange">
<span id="faq-comparechange"></span><span id="index-3"></span><h3><a class="toc-backref" href="#id3">CompareChange</a><a class="headerlink" href="#comparechange" title="Permalink to this headline"></a></h3>
<p>If you attempt to use the
<a class="reference internal" href="CompareChange.html#comparechange-name"><span class="std std-ref">CompareChange</span></a>
function when <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> is true,
you will get an error message stating that
<code class="docutils literal notranslate"><span class="pre">CompareChange</span></code> is not a member of the
<a class="reference internal" href="ADFun.html#adfun-name"><span class="std std-ref">ADFun</span></a> template class.</p>
</section>
<section id="complex-types">
<span id="faq-complex-types"></span><span id="index-4"></span><h3><a class="toc-backref" href="#id4">Complex Types</a><a class="headerlink" href="#complex-types" title="Permalink to this headline"></a></h3>
<p>Which of the following complex types is better:</p>
<div class="line-block">
<div class="line">      <code class="docutils literal notranslate"><span class="pre">AD&lt;</span> <span class="pre">std::complex&lt;</span></code> <em>Base</em> &gt; &gt;</div>
<div class="line">      <code class="docutils literal notranslate"><span class="pre">std::complex&lt;</span> <span class="pre">AD&lt;</span></code> <em>Base</em> &gt; &gt;</div>
</div>
<p>The <a class="reference internal" href="abs.html#abs-complex-types"><span class="std std-ref">complex abs function</span></a> is differentiable
with respect to its real and imaginary parts,
but it is not complex differentiable.
Thus one would prefer to use</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">std::complex&lt;</span> <span class="pre">AD&lt;</span></code> <em>Base</em> &gt; &gt;</p>
</div></blockquote>
<p>On the other hand, the C++ standard only specifies
<code class="docutils literal notranslate"><span class="pre">std::complex&lt;</span></code> <em>Type</em> &gt; where <em>Type</em> is
<code class="docutils literal notranslate"><span class="pre">float</span></code> , <code class="docutils literal notranslate"><span class="pre">double</span></code> , or <code class="docutils literal notranslate"><span class="pre">lone</span> <span class="pre">double</span></code> .
The effect of instantiating the template complex for any other type
is unspecified.</p>
</section>
<section id="exceptions">
<span id="faq-exceptions"></span><span id="index-5"></span><h3><a class="toc-backref" href="#id5">Exceptions</a><a class="headerlink" href="#exceptions" title="Permalink to this headline"></a></h3>
<p>Why, in all the examples, do you pass back a boolean variable instead
of throwing an exception ?</p>
<p>The examples are also used to test the correctness of CppAD
and to check your installation.
For these two uses, it is helpful to run all the tests
and to know which ones failed.
The actual code in CppAD uses the <a class="reference internal" href="ErrorHandler.html#errorhandler-name"><span class="std std-ref">ErrorHandler</span></a> utility
to signal exceptions.
Specifications for redefining this action are provided.</p>
</section>
<section id="independent-variables">
<span id="faq-independent-variables"></span><span id="index-6"></span><h3><a class="toc-backref" href="#id6">Independent Variables</a><a class="headerlink" href="#independent-variables" title="Permalink to this headline"></a></h3>
<p>Is it possible to evaluate the same tape recording with different values
for the independent variables ?</p>
<p>Yes (see <a class="reference internal" href="forward_zero.html#forward-zero-name"><span class="std std-ref">forward_zero</span></a> ).</p>
</section>
<section id="matrix-inverse">
<span id="faq-matrix-inverse"></span><span id="index-7"></span><h3><a class="toc-backref" href="#id7">Matrix Inverse</a><a class="headerlink" href="#matrix-inverse" title="Permalink to this headline"></a></h3>
<p>Is it possible to differentiate (with respect to the matrix elements)
the computation of the inverse of a matrix
where the computation of the inverse uses pivoting ?</p>
<section id="lusolve">
<span id="faq-matrix-inverse-lusolve"></span><span id="index-8"></span><h4><a class="toc-backref" href="#id8">LuSolve</a><a class="headerlink" href="#lusolve" title="Permalink to this headline"></a></h4>
<p>The example routine <a class="reference internal" href="LuSolve.html#lusolve-name"><span class="std std-ref">LuSolve</span></a> can be used to do this
because the inverse is a special case of the solution of linear equations.
The examples
<a class="reference internal" href="jac_lu_det.cpp.html#jac-lu-det-cpp-name"><span class="std std-ref">jac_lu_det.cpp</span></a> and <a class="reference internal" href="hes_lu_det.cpp.html#hes-lu-det-cpp-name"><span class="std std-ref">hes_lu_det.cpp</span></a>
use LuSolve to compute derivatives of the
determinant with respect to the components of the matrix.</p>
</section>
<section id="atomic-operation">
<span id="faq-matrix-inverse-atomic-operation"></span><span id="index-9"></span><h4><a class="toc-backref" href="#id9">Atomic Operation</a><a class="headerlink" href="#atomic-operation" title="Permalink to this headline"></a></h4>
<p>One can also do this by making the inversion of the matrix an atomic operation;
e.g., see <a class="reference internal" href="atomic_two_eigen_mat_inv.cpp.html#atomic-two-eigen-mat-inv-cpp-name"><span class="std std-ref">atomic_two_eigen_mat_inv.cpp</span></a> .</p>
</section>
</section>
<section id="mode-forward-or-reverse">
<span id="faq-mode-forward-or-reverse"></span><span id="index-10"></span><h3><a class="toc-backref" href="#id10">Mode: Forward or Reverse</a><a class="headerlink" href="#mode-forward-or-reverse" title="Permalink to this headline"></a></h3>
<p>When evaluating derivatives,
one always has a choice between
forward and reverse mode.
How does one decide which mode to use ?</p>
<p>In general, the best mode depends on the number of domain and range
components in the function that your are differentiating.
Each call to <a class="reference internal" href="Forward.html#forward-name"><span class="std std-ref">Forward</span></a> computes the derivative of all
the range directions with respect to one domain direction.
Each call to <a class="reference internal" href="Reverse.html#reverse-name"><span class="std std-ref">Reverse</span></a> computes the derivative of one
range direction with respect to all the domain directions.
The times required for (speed of)
calls <code class="docutils literal notranslate"><span class="pre">Forward</span></code> and <code class="docutils literal notranslate"><span class="pre">Reverse</span></code> are about equal.
The <a class="reference internal" href="fun_property.html#fun-property-parameter"><span class="std std-ref">Parameter</span></a>
function can be used to quickly determine that
some range directions have derivative zero.</p>
</section>
<section id="namespace">
<span id="faq-namespace"></span><span id="index-11"></span><h3><a class="toc-backref" href="#id11">Namespace</a><a class="headerlink" href="#namespace" title="Permalink to this headline"></a></h3>
<section id="test-vector-preprocessor-symbol">
<span id="faq-namespace-test-vector-preprocessor-symbol"></span><span id="index-12"></span><h4><a class="toc-backref" href="#id12">Test Vector Preprocessor Symbol</a><a class="headerlink" href="#test-vector-preprocessor-symbol" title="Permalink to this headline"></a></h4>
<p>Why do you use <code class="docutils literal notranslate"><span class="pre">CPPAD_TESTVECTOR</span></code> instead of a namespace for
the CppAD <a class="reference internal" href="testvector.html#testvector-name"><span class="std std-ref">testvector</span></a> class ?</p>
<p>The preprocessor symbol <code class="docutils literal notranslate"><span class="pre">CPPAD_TESTVECTOR</span></code> ( see <a class="reference internal" href="testvector.html#testvector-name"><span class="std std-ref">testvector</span></a> )
determines which
<a class="reference internal" href="SimpleVector.html#simplevector-name"><span class="std std-ref">SimpleVector</span></a> template class is used for extensive testing.
The default definition for <code class="docutils literal notranslate"><span class="pre">CPPAD_TESTVECTOR</span></code> is the
<a class="reference internal" href="CppAD_vector.html#cppad-vector-name"><span class="std std-ref">CppAD::vector</span></a> template class, but it can be changed.
Note that all the preprocessor symbols that are defined or used
by CppAD begin with either <code class="docutils literal notranslate"><span class="pre">CPPAD</span></code>
(some old deprecated symbols begin with <code class="docutils literal notranslate"><span class="pre">CppAD</span></code> ).</p>
</section>
</section>
<section id="speed">
<span id="faq-speed"></span><span id="index-13"></span><h3><a class="toc-backref" href="#id13">Speed</a><a class="headerlink" href="#speed" title="Permalink to this headline"></a></h3>
<p>How do I get the best speed performance out of CppAD ?</p>
<section id="ndebug">
<span id="faq-speed-ndebug"></span><span id="index-14"></span><h4><a class="toc-backref" href="#id14">NDEBUG</a><a class="headerlink" href="#ndebug" title="Permalink to this headline"></a></h4>
<p>You should compile your code with optimization, without debugging,
and with the preprocessor symbol <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code> defined.
(The <a class="reference internal" href="speed_cppad.html#speed-cppad-name"><span class="std std-ref">speed_cppad</span></a> tests do this.)
Note that defining <code class="docutils literal notranslate"><span class="pre">NDEBUG</span></code>
will turn off all of the error checking and reporting that
is done using <a class="reference internal" href="ErrorHandler.html#errorhandler-name"><span class="std std-ref">ErrorHandler</span></a> .</p>
</section>
<section id="optimize">
<span id="faq-speed-optimize"></span><span id="index-15"></span><h4><a class="toc-backref" href="#id15">Optimize</a><a class="headerlink" href="#optimize" title="Permalink to this headline"></a></h4>
<p>It is also possible that preforming a tape
<a class="reference internal" href="optimize.html#optimize-name"><span class="std std-ref">optimization</span></a> will improve the speed of evaluation
more than the time required for the optimization.</p>
</section>
<section id="memory-allocation">
<span id="faq-speed-memory-allocation"></span><span id="index-16"></span><h4><a class="toc-backref" href="#id16">Memory Allocation</a><a class="headerlink" href="#memory-allocation" title="Permalink to this headline"></a></h4>
<p>You may also increase execution speed
by calling <code class="docutils literal notranslate"><span class="pre">hold_memory</span></code> with
<a class="reference internal" href="ta_hold_memory.html#ta-hold-memory-value"><span class="std std-ref">value</span></a> equal to true.</p>
</section>
</section>
<section id="tape-storage-disk-or-memory">
<span id="faq-tape-storage-disk-or-memory"></span><span id="index-17"></span><h3><a class="toc-backref" href="#id17">Tape Storage: Disk or Memory</a><a class="headerlink" href="#tape-storage-disk-or-memory" title="Permalink to this headline"></a></h3>
<p>Does CppAD store the tape on disk or in memory ?</p>
<p>CppAD uses memory to store a different tape for recording operations
for each <code class="docutils literal notranslate"><span class="pre">AD&lt;</span></code> <em>Base</em> &gt; type that is used.
If you have a very large number calculations that are recorded
on a tape, the tape will keep growing to hold the necessary information.
Eventually, virtual memory may be used to store the tape
and the calculations may slow down because of necessary disk access.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Appendix.html" class="btn btn-neutral float-left" title="Appendix" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="directory.html" class="btn btn-neutral float-right" title="directory" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>