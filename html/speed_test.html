<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="speed_test, run, one, speed, test, and, return, results" name="keywords" />
<meta content="syntax" name="keywords" />
<meta content="see, also" name="keywords" />
<meta content="purpose" name="keywords" />
<meta content="motivation" name="keywords" />
<meta content="include" name="keywords" />
<meta content="vector" name="keywords" />
<meta content="test" name="keywords" />
<meta content="size" name="keywords" />
<meta content="repeat" name="keywords" />
<meta content="size_vec" name="keywords" />
<meta content="time_min" name="keywords" />
<meta content="rate_vec" name="keywords" />
<meta content="timing" name="keywords" />
<meta content="example" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>speed_test &mdash; cppad  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="speed_test.cpp" href="speed_test.cpp.html" />
    <link rel="prev" title="sparse_rcv.cpp" href="sparse_rcv.cpp.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="xrst_root_doc.html" class="icon icon-home"> cppad
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="xrst_table_of_contents.html">Table of Contents</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="CppAD.html">CppAD</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Install.html">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="Theory.html">Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="AD.html">AD</a></li>
<li class="toctree-l2"><a class="reference internal" href="ADFun.html">ADFun</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessor.html">preprocessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_thread.html">multi_thread</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="utility.html">utility</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="CheckNumericType.html">CheckNumericType</a></li>
<li class="toctree-l3"><a class="reference internal" href="CheckSimpleVector.html">CheckSimpleVector</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_dll_lib.html">create_dll_lib</a></li>
<li class="toctree-l3"><a class="reference internal" href="ErrorHandler.html">ErrorHandler</a></li>
<li class="toctree-l3"><a class="reference internal" href="index_sort.html">index_sort</a></li>
<li class="toctree-l3"><a class="reference internal" href="link_dll_lib.html">link_dll_lib</a></li>
<li class="toctree-l3"><a class="reference internal" href="nan.html">nan</a></li>
<li class="toctree-l3"><a class="reference internal" href="NearEqual.html">NearEqual</a></li>
<li class="toctree-l3"><a class="reference internal" href="OdeErrControl.html">OdeErrControl</a></li>
<li class="toctree-l3"><a class="reference internal" href="OdeGear.html">OdeGear</a></li>
<li class="toctree-l3"><a class="reference internal" href="OdeGearControl.html">OdeGearControl</a></li>
<li class="toctree-l3"><a class="reference internal" href="Poly.html">Poly</a></li>
<li class="toctree-l3"><a class="reference internal" href="pow_int.html">pow_int</a></li>
<li class="toctree-l3"><a class="reference internal" href="RombergMul.html">RombergMul</a></li>
<li class="toctree-l3"><a class="reference internal" href="RombergOne.html">RombergOne</a></li>
<li class="toctree-l3"><a class="reference internal" href="Rosen34.html">Rosen34</a></li>
<li class="toctree-l3"><a class="reference internal" href="Runge45.html">Runge45</a></li>
<li class="toctree-l3"><a class="reference internal" href="set_union.html">set_union</a></li>
<li class="toctree-l3"><a class="reference internal" href="sparse2eigen.html">sparse2eigen</a></li>
<li class="toctree-l3"><a class="reference internal" href="sparse_rc.html">sparse_rc</a></li>
<li class="toctree-l3"><a class="reference internal" href="sparse_rcv.html">sparse_rcv</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">speed_test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="speed_test.cpp.html">speed_test.cpp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="SpeedTest.html">SpeedTest</a></li>
<li class="toctree-l3"><a class="reference internal" href="test_boolofvoid.html">test_boolofvoid</a></li>
<li class="toctree-l3"><a class="reference internal" href="time_test.html">time_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="to_string.html">to_string</a></li>
<li class="toctree-l3"><a class="reference internal" href="CppAD_vector.html">CppAD_vector</a></li>
<li class="toctree-l3"><a class="reference internal" href="lu_det_and_solve.html">lu_det_and_solve</a></li>
<li class="toctree-l3"><a class="reference internal" href="NumericType.html">NumericType</a></li>
<li class="toctree-l3"><a class="reference internal" href="SimpleVector.html">SimpleVector</a></li>
<li class="toctree-l3"><a class="reference internal" href="thread_alloc.html">thread_alloc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ipopt_solve.html">ipopt_solve</a></li>
<li class="toctree-l2"><a class="reference internal" href="Example.html">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="speed.html">speed</a></li>
<li class="toctree-l2"><a class="reference internal" href="Appendix.html">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xrst_index.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="xrst_root_doc.html">cppad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="xrst_root_doc.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="CppAD.html">CppAD</a> &raquo;</li>
          <li><a href="utility.html">utility</a> &raquo;</li>
      <li>speed_test</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/speed_test.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p class="hidden"><span class="math notranslate nohighlight">\(\newcommand{\W}[1]{ \; #1 \; }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\R}[1]{ {\rm #1} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\B}[1]{ {\bf #1} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\D}[2]{ \frac{\partial #1}{\partial #2} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\DD}[3]{ \frac{\partial^2 #1}{\partial #2 \partial #3} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\Dpow}[2]{ \frac{\partial^{#1}}{\partial  {#2}^{#1}} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\dpow}[2]{ \frac{ {\rm d}^{#1}}{{\rm d}\, {#2}^{#1}} }\)</span></p>
<section id="speed-test">
<span id="speed-test-name"></span><h1>speed_test<a class="headerlink" href="#speed-test" title="Permalink to this headline"></a></h1>
<section id="run-one-speed-test-and-return-results">
<span id="speed-test-title"></span><span id="index-0"></span><h2>Run One Speed Test and Return Results<a class="headerlink" href="#run-one-speed-test-and-return-results" title="Permalink to this headline"></a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#syntax" id="id1">Syntax</a></p></li>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
<li><p><a class="reference internal" href="#purpose" id="id3">Purpose</a></p></li>
<li><p><a class="reference internal" href="#motivation" id="id4">Motivation</a></p></li>
<li><p><a class="reference internal" href="#include" id="id5">Include</a></p></li>
<li><p><a class="reference internal" href="#vector" id="id6">Vector</a></p></li>
<li><p><a class="reference internal" href="#test" id="id7">test</a></p>
<ul>
<li><p><a class="reference internal" href="#size" id="id8">size</a></p></li>
<li><p><a class="reference internal" href="#repeat" id="id9">repeat</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#size-vec" id="id10">size_vec</a></p></li>
<li><p><a class="reference internal" href="#time-min" id="id11">time_min</a></p></li>
<li><p><a class="reference internal" href="#rate-vec" id="id12">rate_vec</a></p></li>
<li><p><a class="reference internal" href="#timing" id="id13">Timing</a></p></li>
<li><p><a class="reference internal" href="#example" id="id14">Example</a></p></li>
</ul>
</div>
<section id="syntax">
<span id="speed-test-syntax"></span><span id="index-1"></span><h3><a class="toc-backref" href="#id1">Syntax</a><a class="headerlink" href="#syntax" title="Permalink to this headline"></a></h3>
<blockquote>
<div><p># <code class="docutils literal notranslate"><span class="pre">include</span> <span class="pre">&lt;cppad/utility/speed_test.hpp&gt;</span></code></p>
</div></blockquote>
<p><em>rate_vec</em> = <code class="docutils literal notranslate"><span class="pre">speed_test</span></code> ( <em>test</em> , <em>size_vec</em> , <em>time_min</em> )</p>
</section>
<section id="see-also">
<span id="speed-test-see-also"></span><span id="index-2"></span><h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline"></a></h3>
<p><a class="reference internal" href="time_test.html#time-test-name"><span class="std std-ref">time_test</span></a></p>
</section>
<section id="purpose">
<span id="speed-test-purpose"></span><span id="index-3"></span><h3><a class="toc-backref" href="#id3">Purpose</a><a class="headerlink" href="#purpose" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">speed_test</span></code> function executes a speed test
for various sized problems
and reports the rate of execution.</p>
</section>
<section id="motivation">
<span id="speed-test-motivation"></span><span id="index-4"></span><h3><a class="toc-backref" href="#id4">Motivation</a><a class="headerlink" href="#motivation" title="Permalink to this headline"></a></h3>
<p>It is important to separate small calculation units
and test them individually.
This way individual changes can be tested in the context of the
routine that they are in.
On many machines, accurate timing of a very short execution
sequences is not possible.
In addition,
there may be set up and tear down time for a test that
we do not really want included in the timing.
For this reason <code class="docutils literal notranslate"><span class="pre">speed_test</span></code>
automatically determines how many times to
repeat the section of the test that we wish to time.</p>
</section>
<section id="include">
<span id="speed-test-include"></span><span id="index-5"></span><h3><a class="toc-backref" href="#id5">Include</a><a class="headerlink" href="#include" title="Permalink to this headline"></a></h3>
<p>The file <code class="docutils literal notranslate"><span class="pre">cppad/utility/speed_test.hpp</span></code> defines the
<code class="docutils literal notranslate"><span class="pre">speed_test</span></code> function.
This file is included by <code class="docutils literal notranslate"><span class="pre">cppad/cppad.hpp</span></code>
and it can also be included separately with out the rest of
the <code class="docutils literal notranslate"><span class="pre">CppAD</span></code> routines.</p>
</section>
<section id="vector">
<span id="speed-test-vector"></span><span id="index-6"></span><h3><a class="toc-backref" href="#id6">Vector</a><a class="headerlink" href="#vector" title="Permalink to this headline"></a></h3>
<p>We use <em>Vector</em> to denote a
<a class="reference internal" href="SimpleVector.html#simplevector-name"><span class="std std-ref">simple vector class</span></a> with elements
of type <code class="docutils literal notranslate"><span class="pre">size_t</span></code> .</p>
</section>
<section id="test">
<span id="speed-test-test"></span><span id="index-7"></span><h3><a class="toc-backref" href="#id7">test</a><a class="headerlink" href="#test" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">speed_test</span></code> argument <em>test</em> is a function with the syntax</p>
<blockquote>
<div><p><em>test</em> ( <em>size</em> , <em>repeat</em> )</p>
</div></blockquote>
<p>and its return value is <code class="docutils literal notranslate"><span class="pre">void</span></code> .</p>
<section id="size">
<span id="speed-test-test-size"></span><span id="index-8"></span><h4><a class="toc-backref" href="#id8">size</a><a class="headerlink" href="#size" title="Permalink to this headline"></a></h4>
<p>The <em>test</em> argument <em>size</em> has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">size_t</span></code> <em>size</em></p>
</div></blockquote>
<p>It specifies the size for this test.</p>
</section>
<section id="repeat">
<span id="speed-test-test-repeat"></span><span id="index-9"></span><h4><a class="toc-backref" href="#id9">repeat</a><a class="headerlink" href="#repeat" title="Permalink to this headline"></a></h4>
<p>The <em>test</em> argument <em>repeat</em> has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">size_t</span></code> <em>repeat</em></p>
</div></blockquote>
<p>It specifies the number of times to repeat the test.</p>
</section>
</section>
<section id="size-vec">
<span id="speed-test-size-vec"></span><span id="index-10"></span><h3><a class="toc-backref" href="#id10">size_vec</a><a class="headerlink" href="#size-vec" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">speed_test</span></code> argument <em>size_vec</em> has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">const</span></code> <em>Vector</em> &amp; <em>size_vec</em></p>
</div></blockquote>
<p>This vector determines the size for each of the tests problems.</p>
</section>
<section id="time-min">
<span id="speed-test-time-min"></span><span id="index-11"></span><h3><a class="toc-backref" href="#id11">time_min</a><a class="headerlink" href="#time-min" title="Permalink to this headline"></a></h3>
<p>The argument <em>time_min</em> has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">double</span></code> <em>time_min</em></p>
</div></blockquote>
<p>It specifies the minimum amount of time in seconds
that the <em>test</em> routine should take.
The <em>repeat</em> argument to <em>test</em> is increased
until this amount of execution time is reached.</p>
</section>
<section id="rate-vec">
<span id="speed-test-rate-vec"></span><span id="index-12"></span><h3><a class="toc-backref" href="#id12">rate_vec</a><a class="headerlink" href="#rate-vec" title="Permalink to this headline"></a></h3>
<p>The return value <em>rate_vec</em> has prototype</p>
<blockquote>
<div><p><em>Vector</em> &amp; <em>rate_vec</em></p>
</div></blockquote>
<p>We use <span class="math notranslate nohighlight">\(n\)</span> to denote its size which is the same as
the vector <em>size_vec</em> .
For <span class="math notranslate nohighlight">\(i = 0 , \ldots , n-1\)</span>,</p>
<blockquote>
<div><p><em>rate_vec</em> [ <em>i</em> ]</p>
</div></blockquote>
<p>is the ratio of <em>repeat</em> divided by time in seconds
for the problem with size <em>size_vec</em> [ <em>i</em> ] .</p>
</section>
<section id="timing">
<span id="speed-test-timing"></span><span id="index-13"></span><h3><a class="toc-backref" href="#id13">Timing</a><a class="headerlink" href="#timing" title="Permalink to this headline"></a></h3>
<p>If your system supports the unix <code class="docutils literal notranslate"><span class="pre">gettimeofday</span></code> function,
it will be used to measure time.
Otherwise,
time is measured by the difference in</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">double</span><span class="p">)</span> <span class="n">clock</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span> <span class="n">CLOCKS_PER_SEC</span>
</pre></div>
</div>
<p>in the context of the standard <code class="docutils literal notranslate"><span class="pre">&lt;ctime&gt;</span></code> definitions.</p>
</section>
<section id="example">
<span id="speed-test-example"></span><span id="index-14"></span><h3><a class="toc-backref" href="#id14">Example</a><a class="headerlink" href="#example" title="Permalink to this headline"></a></h3>
<p>The routine <a class="reference internal" href="speed_test.cpp.html#speed-test-cpp-name"><span class="std std-ref">speed_test.cpp</span></a> is an example and test
of <code class="docutils literal notranslate"><span class="pre">speed_test</span></code> .</p>
<div class="toctree-wrapper compound">
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sparse_rcv.cpp.html" class="btn btn-neutral float-left" title="sparse_rcv.cpp" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="speed_test.cpp.html" class="btn btn-neutral float-right" title="speed_test.cpp" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>