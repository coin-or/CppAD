<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="subgraph_sparsity, subgraph, dependency, sparsity, patterns" name="keywords" />
<meta content="syntax" name="keywords" />
<meta content="see, also" name="keywords" />
<meta content="notation" name="keywords" />
<meta content="method" name="keywords" />
<meta content="atomic, function" name="keywords" />
<meta content="boolvector" name="keywords" />
<meta content="sizevector" name="keywords" />
<meta content="f" name="keywords" />
<meta content="select_domain" name="keywords" />
<meta content="select_range" name="keywords" />
<meta content="transpose" name="keywords" />
<meta content="pattern_out" name="keywords" />
<meta content="example" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>subgraph_sparsity &mdash; cppad  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="subgraph_sparsity.cpp" href="subgraph_sparsity.cpp.html" />
    <link rel="prev" title="rev_hes_sparsity.cpp" href="rev_hes_sparsity.cpp.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="xrst_root_doc.html" class="icon icon-home"> cppad
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="xrst_table_of_contents.html">Table of Contents</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="CppAD.html">CppAD</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Install.html">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="Theory.html">Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="AD.html">AD</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="ADFun.html">ADFun</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="record_adfun.html">record_adfun</a></li>
<li class="toctree-l3"><a class="reference internal" href="other_adfun.html">other_adfun</a></li>
<li class="toctree-l3"><a class="reference internal" href="drivers.html">drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="Forward.html">Forward</a></li>
<li class="toctree-l3"><a class="reference internal" href="Reverse.html">Reverse</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="sparsity_pattern.html">sparsity_pattern</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="for_jac_sparsity.html">for_jac_sparsity</a></li>
<li class="toctree-l4"><a class="reference internal" href="rev_jac_sparsity.html">rev_jac_sparsity</a></li>
<li class="toctree-l4"><a class="reference internal" href="for_hes_sparsity.html">for_hes_sparsity</a></li>
<li class="toctree-l4"><a class="reference internal" href="rev_hes_sparsity.html">rev_hes_sparsity</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">subgraph_sparsity</a><ul>
<li class="toctree-l5"><a class="reference internal" href="subgraph_sparsity.cpp.html">subgraph_sparsity.cpp</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="dependency.cpp.html">dependency.cpp</a></li>
<li class="toctree-l4"><a class="reference internal" href="rc_sparsity.cpp.html">rc_sparsity.cpp</a></li>
<li class="toctree-l4"><a class="reference internal" href="ForSparseJac.html">ForSparseJac</a></li>
<li class="toctree-l4"><a class="reference internal" href="RevSparseJac.html">RevSparseJac</a></li>
<li class="toctree-l4"><a class="reference internal" href="RevSparseHes.html">RevSparseHes</a></li>
<li class="toctree-l4"><a class="reference internal" href="ForSparseHes.html">ForSparseHes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sparse_derivative.html">sparse_derivative</a></li>
<li class="toctree-l3"><a class="reference internal" href="optimize.html">optimize</a></li>
<li class="toctree-l3"><a class="reference internal" href="FunCheck.html">FunCheck</a></li>
<li class="toctree-l3"><a class="reference internal" href="check_for_nan.html">check_for_nan</a></li>
<li class="toctree-l3"><a class="reference internal" href="to_csrc.html">to_csrc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="preprocessor.html">preprocessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_thread.html">multi_thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="utility.html">utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipopt_solve.html">ipopt_solve</a></li>
<li class="toctree-l2"><a class="reference internal" href="Example.html">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="speed.html">speed</a></li>
<li class="toctree-l2"><a class="reference internal" href="Appendix.html">Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xrst_index.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="xrst_root_doc.html">cppad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="xrst_root_doc.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="CppAD.html">CppAD</a> &raquo;</li>
          <li><a href="ADFun.html">ADFun</a> &raquo;</li>
          <li><a href="sparsity_pattern.html">sparsity_pattern</a> &raquo;</li>
      <li>subgraph_sparsity</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/subgraph_sparsity.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p class="hidden"><span class="math notranslate nohighlight">\(\newcommand{\W}[1]{ \; #1 \; }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\R}[1]{ {\rm #1} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\B}[1]{ {\bf #1} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\D}[2]{ \frac{\partial #1}{\partial #2} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\DD}[3]{ \frac{\partial^2 #1}{\partial #2 \partial #3} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\Dpow}[2]{ \frac{\partial^{#1}}{\partial  {#2}^{#1}} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\dpow}[2]{ \frac{ {\rm d}^{#1}}{{\rm d}\, {#2}^{#1}} }\)</span></p>
<section id="subgraph-sparsity">
<span id="subgraph-sparsity-name"></span><h1>subgraph_sparsity<a class="headerlink" href="#subgraph-sparsity" title="Permalink to this headline"></a></h1>
<section id="subgraph-dependency-sparsity-patterns">
<span id="subgraph-sparsity-title"></span><span id="index-0"></span><h2>Subgraph Dependency Sparsity Patterns<a class="headerlink" href="#subgraph-dependency-sparsity-patterns" title="Permalink to this headline"></a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#syntax" id="id1">Syntax</a></p></li>
<li><p><a class="reference internal" href="#see-also" id="id2">See Also</a></p></li>
<li><p><a class="reference internal" href="#notation" id="id3">Notation</a></p></li>
<li><p><a class="reference internal" href="#method" id="id4">Method</a></p></li>
<li><p><a class="reference internal" href="#atomic-function" id="id5">Atomic Function</a></p></li>
<li><p><a class="reference internal" href="#boolvector" id="id6">BoolVector</a></p></li>
<li><p><a class="reference internal" href="#sizevector" id="id7">SizeVector</a></p></li>
<li><p><a class="reference internal" href="#f" id="id8">f</a></p></li>
<li><p><a class="reference internal" href="#select-domain" id="id9">select_domain</a></p></li>
<li><p><a class="reference internal" href="#select-range" id="id10">select_range</a></p></li>
<li><p><a class="reference internal" href="#transpose" id="id11">transpose</a></p></li>
<li><p><a class="reference internal" href="#pattern-out" id="id12">pattern_out</a></p></li>
<li><p><a class="reference internal" href="#example" id="id13">Example</a></p></li>
</ul>
</div>
<section id="syntax">
<span id="subgraph-sparsity-syntax"></span><span id="index-1"></span><h3><a class="toc-backref" href="#id1">Syntax</a><a class="headerlink" href="#syntax" title="Permalink to this headline"></a></h3>
<div class="line-block">
<div class="line"><em>f</em> . <code class="docutils literal notranslate"><span class="pre">subgraph_sparsity</span></code> (</div>
<div class="line">      <em>select_domain</em> , <em>select_range</em> , <em>transpose</em> , <em>pattern_out</em></div>
<div class="line">)</div>
</div>
</section>
<section id="see-also">
<span id="subgraph-sparsity-see-also"></span><span id="index-2"></span><h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline"></a></h3>
<p><a class="reference internal" href="subgraph_reverse.html#subgraph-reverse-clear-subgraph"><span class="std std-ref">clear_subgraph</span></a> .</p>
</section>
<section id="notation">
<span id="subgraph-sparsity-notation"></span><span id="index-3"></span><h3><a class="toc-backref" href="#id3">Notation</a><a class="headerlink" href="#notation" title="Permalink to this headline"></a></h3>
<p>We use <span class="math notranslate nohighlight">\(F : \B{R}^n \rightarrow \B{R}^m\)</span> to denote the
<a class="reference internal" href="glossary.html#glossary-ad-function"><span class="std std-ref">AD Function</span></a> corresponding to
the operation sequence stored in <em>f</em> .</p>
</section>
<section id="method">
<span id="subgraph-sparsity-method"></span><span id="index-4"></span><h3><a class="toc-backref" href="#id4">Method</a><a class="headerlink" href="#method" title="Permalink to this headline"></a></h3>
<p>This routine uses a subgraph technique. To be specific,
for each dependent variable,
it creates a subgraph of the operation sequence
containing the variables that affect the dependent variable.
This avoids the overhead of performing set operations
that is inherent in other methods for computing sparsity patterns.</p>
</section>
<section id="atomic-function">
<span id="subgraph-sparsity-atomic-function"></span><span id="index-5"></span><h3><a class="toc-backref" href="#id5">Atomic Function</a><a class="headerlink" href="#atomic-function" title="Permalink to this headline"></a></h3>
<p>The sparsity calculation for
<a class="reference internal" href="atomic_two_afun.html#atomic-two-afun-name"><span class="std std-ref">atomic functions</span></a> in the <em>f</em> operation sequence
are not efficient. To be specific, each atomic function is treated as if
all of its outputs depend on all of its inputs.
This may be improved upon in the future; see the
<a class="reference internal" href="wish_list.html#wish-list-subgraph-sparsity"><span class="std std-ref">subgraph sparsity</span></a>
wish list item.</p>
</section>
<section id="boolvector">
<span id="subgraph-sparsity-boolvector"></span><span id="index-6"></span><h3><a class="toc-backref" href="#id6">BoolVector</a><a class="headerlink" href="#boolvector" title="Permalink to this headline"></a></h3>
<p>The type <em>BoolVector</em> is a <a class="reference internal" href="SimpleVector.html#simplevector-name"><span class="std std-ref">SimpleVector</span></a> class with
<a class="reference internal" href="SimpleVector.html#simplevector-elements-of-specified-type"><span class="std std-ref">elements of type</span></a>
<code class="docutils literal notranslate"><span class="pre">bool</span></code> .</p>
</section>
<section id="sizevector">
<span id="subgraph-sparsity-sizevector"></span><span id="index-7"></span><h3><a class="toc-backref" href="#id7">SizeVector</a><a class="headerlink" href="#sizevector" title="Permalink to this headline"></a></h3>
<p>The type <em>SizeVector</em> is a <a class="reference internal" href="SimpleVector.html#simplevector-name"><span class="std std-ref">SimpleVector</span></a> class with
<a class="reference internal" href="SimpleVector.html#simplevector-elements-of-specified-type"><span class="std std-ref">elements of type</span></a>
<code class="docutils literal notranslate"><span class="pre">size_t</span></code> .</p>
</section>
<section id="f">
<span id="subgraph-sparsity-f"></span><span id="index-8"></span><h3><a class="toc-backref" href="#id8">f</a><a class="headerlink" href="#f" title="Permalink to this headline"></a></h3>
<p>The object <em>f</em> has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">ADFun&lt;</span></code> <em>Base</em> &gt; <em>f</em></p>
</div></blockquote>
</section>
<section id="select-domain">
<span id="subgraph-sparsity-select-domain"></span><span id="index-9"></span><h3><a class="toc-backref" href="#id9">select_domain</a><a class="headerlink" href="#select-domain" title="Permalink to this headline"></a></h3>
<p>The argument <em>select_domain</em> has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">const</span></code> <em>BoolVector</em> &amp; <em>select_domain</em></p>
</div></blockquote>
<p>It has size <span class="math notranslate nohighlight">\(n\)</span> and specifies which independent variables
to include in the calculation.
If not all the independent variables are included in the calculation,
a forward pass on the operation sequence is used to determine which
nodes may be in the subgraphs.</p>
</section>
<section id="select-range">
<span id="subgraph-sparsity-select-range"></span><span id="index-10"></span><h3><a class="toc-backref" href="#id10">select_range</a><a class="headerlink" href="#select-range" title="Permalink to this headline"></a></h3>
<p>The argument <em>select_range</em> has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">const</span></code> <em>BoolVector</em> &amp; <em>select_range</em></p>
</div></blockquote>
<p>It has size <span class="math notranslate nohighlight">\(m\)</span> and specifies which components of the range
to include in the calculation.
A subgraph is built for each dependent variable
and the selected set of independent variables.</p>
</section>
<section id="transpose">
<span id="subgraph-sparsity-transpose"></span><span id="index-11"></span><h3><a class="toc-backref" href="#id11">transpose</a><a class="headerlink" href="#transpose" title="Permalink to this headline"></a></h3>
<p>This argument has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">bool</span></code> <em>transpose</em></p>
</div></blockquote>
<p>If <em>transpose</em> it is false (true),
upon return <em>pattern_out</em> is a sparsity pattern for
<span class="math notranslate nohighlight">\(J(x)\)</span> (<span class="math notranslate nohighlight">\(J(x)^\R{T}\)</span>) defined below.</p>
</section>
<section id="pattern-out">
<span id="subgraph-sparsity-pattern-out"></span><span id="index-12"></span><h3><a class="toc-backref" href="#id12">pattern_out</a><a class="headerlink" href="#pattern-out" title="Permalink to this headline"></a></h3>
<p>This argument has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">sparse_rc&lt;</span></code> <em>SizeVector</em> &gt;&amp; <em>pattern_out</em></p>
</div></blockquote>
<p>This input value of <em>pattern_out</em> does not matter.
Upon return <em>pattern_out</em> is a
<a class="reference internal" href="dependency.cpp.html#dependency-cpp-dependency-pattern"><span class="std std-ref">Dependency Pattern</span></a>
for <span class="math notranslate nohighlight">\(F(x)\)</span>.
The pattern has <span class="math notranslate nohighlight">\(m\)</span> rows, <span class="math notranslate nohighlight">\(n\)</span> columns.
If <em>select_domain</em> [ <em>j</em> ] is true,
<em>select_range</em> [ <em>i</em> ] is true, and
<span class="math notranslate nohighlight">\(F_i (x)\)</span> depends on <span class="math notranslate nohighlight">\(x_j\)</span>,
then the pair <span class="math notranslate nohighlight">\((i, j)\)</span> is in <em>pattern_out</em> .
Not that this is also a sparsity pattern for the Jacobian</p>
<div class="math notranslate nohighlight">
\[J(x) = R F^{(1)} (x) D\]</div>
<p>where <span class="math notranslate nohighlight">\(D\)</span> (<span class="math notranslate nohighlight">\(R\)</span>) is the diagonal matrix corresponding
to <em>select_domain</em> ( <em>select_range</em> ).</p>
</section>
<section id="example">
<span id="subgraph-sparsity-example"></span><span id="index-13"></span><h3><a class="toc-backref" href="#id13">Example</a><a class="headerlink" href="#example" title="Permalink to this headline"></a></h3>
<p>The file
<a class="reference internal" href="subgraph_sparsity.cpp.html#subgraph-sparsity-cpp-name"><span class="std std-ref">subgraph_sparsity.cpp</span></a>
contains an example and test of this operation.</p>
<div class="toctree-wrapper compound">
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rev_hes_sparsity.cpp.html" class="btn btn-neutral float-left" title="rev_hes_sparsity.cpp" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="subgraph_sparsity.cpp.html" class="btn btn-neutral float-right" title="subgraph_sparsity.cpp" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>