<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="chkpoint_one, checkpoint, functions:, first, generation" name="keywords" />
<meta content="deprecated, 2019-01-14" name="keywords" />
<meta content="syntax" name="keywords" />
<meta content="see, also" name="keywords" />
<meta content="purpose" name="keywords" />
<meta content="reduce, memory" name="keywords" />
<meta content="faster, recording" name="keywords" />
<meta content="repeating, forward" name="keywords" />
<meta content="restriction" name="keywords" />
<meta content="multiple, level, ad" name="keywords" />
<meta content="method" name="keywords" />
<meta content="constructor" name="keywords" />
<meta content="base" name="keywords" />
<meta content="advector" name="keywords" />
<meta content="name" name="keywords" />
<meta content="ax" name="keywords" />
<meta content="ay" name="keywords" />
<meta content="sparsity" name="keywords" />
<meta content="optimize" name="keywords" />
<meta content="size_var" name="keywords" />
<meta content="option" name="keywords" />
<meta content="algo" name="keywords" />
<meta content="atom_fun" name="keywords" />
<meta content="memory" name="keywords" />
<meta content="restriction" name="keywords" />
<meta content="parallel, mode" name="keywords" />
<meta content="clear" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>chkpoint_one &mdash; cppad  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="multi_chkpoint_one.cpp" href="multi_chkpoint_one.cpp.html" />
    <link rel="prev" title="multi_atomic_two_time" href="multi_atomic_two_time.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="xrst_root_doc.html" class="icon icon-home"> cppad
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="xrst_table_of_contents.html">Table of Contents</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="CppAD.html">CppAD</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Install.html">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="Theory.html">Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="AD.html">AD</a></li>
<li class="toctree-l2"><a class="reference internal" href="ADFun.html">ADFun</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessor.html">preprocessor</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_thread.html">multi_thread</a></li>
<li class="toctree-l2"><a class="reference internal" href="utility.html">utility</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipopt_solve.html">ipopt_solve</a></li>
<li class="toctree-l2"><a class="reference internal" href="Example.html">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="speed.html">speed</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Appendix.html">Appendix</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Faq.html">Faq</a></li>
<li class="toctree-l3"><a class="reference internal" href="directory.html">directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="glossary.html">glossary</a></li>
<li class="toctree-l3"><a class="reference internal" href="Bib.html">Bib</a></li>
<li class="toctree-l3"><a class="reference internal" href="wish_list.html">wish_list</a></li>
<li class="toctree-l3"><a class="reference internal" href="whats_new.html">whats_new</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="deprecated.html">deprecated</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="include_deprecated.html">include_deprecated</a></li>
<li class="toctree-l4"><a class="reference internal" href="fun_deprecated.html">fun_deprecated</a></li>
<li class="toctree-l4"><a class="reference internal" href="CompareChange.html">CompareChange</a></li>
<li class="toctree-l4"><a class="reference internal" href="omp_max_thread.html">omp_max_thread</a></li>
<li class="toctree-l4"><a class="reference internal" href="track_new_del.html">track_new_del</a></li>
<li class="toctree-l4"><a class="reference internal" href="omp_alloc.html">omp_alloc</a></li>
<li class="toctree-l4"><a class="reference internal" href="memory_leak.html">memory_leak</a></li>
<li class="toctree-l4"><a class="reference internal" href="epsilon.html">epsilon</a></li>
<li class="toctree-l4"><a class="reference internal" href="cppad_ipopt_nlp.html">cppad_ipopt_nlp</a></li>
<li class="toctree-l4"><a class="reference internal" href="atomic_one.html">atomic_one</a></li>
<li class="toctree-l4"><a class="reference internal" href="atomic_two.html">atomic_two</a></li>
<li class="toctree-l4"><a class="reference internal" href="atomic_two_example.html">atomic_two_example</a></li>
<li class="toctree-l4"><a class="reference internal" href="multi_atomic_two.cpp.html">multi_atomic_two.cpp</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">chkpoint_one</a></li>
<li class="toctree-l4"><a class="reference internal" href="multi_chkpoint_one.cpp.html">multi_chkpoint_one.cpp</a></li>
<li class="toctree-l4"><a class="reference internal" href="zdouble.html">zdouble</a></li>
<li class="toctree-l4"><a class="reference internal" href="autotools.html">autotools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="compare_c.html">compare_c</a></li>
<li class="toctree-l3"><a class="reference internal" href="numeric_ad.html">numeric_ad</a></li>
<li class="toctree-l3"><a class="reference internal" href="addon.html">addon</a></li>
<li class="toctree-l3"><a class="reference internal" href="License.html">License</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xrst_index.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="xrst_root_doc.html">cppad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="xrst_root_doc.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="CppAD.html">CppAD</a> &raquo;</li>
          <li><a href="Appendix.html">Appendix</a> &raquo;</li>
          <li><a href="deprecated.html">deprecated</a> &raquo;</li>
      <li>chkpoint_one</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/chkpoint_one.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p class="hidden"><span class="math notranslate nohighlight">\(\newcommand{\W}[1]{ \; #1 \; }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\R}[1]{ {\rm #1} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\B}[1]{ {\bf #1} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\D}[2]{ \frac{\partial #1}{\partial #2} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\DD}[3]{ \frac{\partial^2 #1}{\partial #2 \partial #3} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\Dpow}[2]{ \frac{\partial^{#1}}{\partial  {#2}^{#1}} }\)</span>
<span class="math notranslate nohighlight">\(\newcommand{\dpow}[2]{ \frac{ {\rm d}^{#1}}{{\rm d}\, {#2}^{#1}} }\)</span></p>
<section id="chkpoint-one">
<span id="chkpoint-one-name"></span><h1>chkpoint_one<a class="headerlink" href="#chkpoint-one" title="Permalink to this headline"></a></h1>
<section id="checkpoint-functions-first-generation">
<span id="chkpoint-one-title"></span><span id="index-0"></span><h2>Checkpoint Functions: First Generation<a class="headerlink" href="#checkpoint-functions-first-generation" title="Permalink to this headline"></a></h2>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#deprecated-2019-01-14" id="id3">Deprecated 2019-01-14</a></p></li>
<li><p><a class="reference internal" href="#syntax" id="id4">Syntax</a></p></li>
<li><p><a class="reference internal" href="#see-also" id="id5">See Also</a></p></li>
<li><p><a class="reference internal" href="#purpose" id="id6">Purpose</a></p>
<ul>
<li><p><a class="reference internal" href="#reduce-memory" id="id7">Reduce Memory</a></p></li>
<li><p><a class="reference internal" href="#faster-recording" id="id8">Faster Recording</a></p></li>
<li><p><a class="reference internal" href="#repeating-forward" id="id9">Repeating Forward</a></p></li>
<li><p><a class="reference internal" href="#restriction" id="id10">Restriction</a></p></li>
<li><p><a class="reference internal" href="#multiple-level-ad" id="id11">Multiple Level AD</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#method" id="id12">Method</a></p></li>
<li><p><a class="reference internal" href="#constructor" id="id13">constructor</a></p></li>
<li><p><a class="reference internal" href="#base" id="id14">Base</a></p></li>
<li><p><a class="reference internal" href="#advector" id="id15">ADVector</a></p></li>
<li><p><a class="reference internal" href="#name" id="id16">name</a></p></li>
<li><p><a class="reference internal" href="#ax" id="id17">ax</a></p></li>
<li><p><a class="reference internal" href="#ay" id="id18">ay</a></p></li>
<li><p><a class="reference internal" href="#sparsity" id="id19">sparsity</a></p></li>
<li><p><a class="reference internal" href="#optimize" id="id20">optimize</a></p></li>
<li><p><a class="reference internal" href="#size-var" id="id21">size_var</a></p></li>
<li><p><a class="reference internal" href="#option" id="id22">option</a></p></li>
<li><p><a class="reference internal" href="#algo" id="id23">algo</a></p></li>
<li><p><a class="reference internal" href="#atom-fun" id="id24">atom_fun</a></p></li>
<li><p><a class="reference internal" href="#memory" id="id25">Memory</a></p>
<ul>
<li><p><a class="reference internal" href="#chkpoint-one-memory-restriction" id="id26">Restriction</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parallel-mode" id="id27">Parallel Mode</a></p>
<ul>
<li><p><a class="reference internal" href="#clear" id="id28">clear</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="deprecated-2019-01-14">
<span id="chkpoint-one-deprecated-2019-01-14"></span><span id="index-1"></span><h3><a class="toc-backref" href="#id3">Deprecated 2019-01-14</a><a class="headerlink" href="#deprecated-2019-01-14" title="Permalink to this headline"></a></h3>
<p>Using the <code class="docutils literal notranslate"><span class="pre">checkpoint</span></code> class has been deprecated.
Use <a class="reference internal" href="chkpoint_two.html#chkpoint-two-name"><span class="std std-ref">chkpoint_two</span></a> instead.</p>
</section>
<section id="syntax">
<span id="chkpoint-one-syntax"></span><span id="index-2"></span><h3><a class="toc-backref" href="#id4">Syntax</a><a class="headerlink" href="#syntax" title="Permalink to this headline"></a></h3>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">checkpoint&lt;</span></code> <em>Base</em> &gt; <em>atom_fun</em> (</div>
<div class="line">      <em>name</em> , <em>algo</em> , <em>ax</em> , <em>ay</em> , <em>sparsity</em> , <em>optimize</em></div>
<div class="line">)</div>
<div class="line"><em>sv</em> = <em>atom_fun</em> . <code class="docutils literal notranslate"><span class="pre">size_var</span></code> ()</div>
<div class="line"><em>atom_fun</em> . <code class="docutils literal notranslate"><span class="pre">option</span></code> ( <em>option_value</em> )</div>
<div class="line"><em>algo</em> ( <em>ax</em> , <em>ay</em> )</div>
<div class="line"><em>atom_fun</em> ( <em>ax</em> , <em>ay</em> )</div>
<div class="line"><em>checkpoint&lt;</em> <code class="docutils literal notranslate"><span class="pre">Base</span></code> &gt;:: <em>clear</em> ()</div>
</div>
</section>
<section id="see-also">
<span id="chkpoint-one-see-also"></span><span id="index-3"></span><h3><a class="toc-backref" href="#id5">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline"></a></h3>
<p><a class="reference internal" href="atomic_two.html#atomic-two-name"><span class="std std-ref">atomic_two</span></a> , <a class="reference internal" href="rev_checkpoint.cpp.html#rev-checkpoint-cpp-name"><span class="std std-ref">rev_checkpoint.cpp</span></a></p>
</section>
<section id="purpose">
<span id="chkpoint-one-purpose"></span><span id="index-4"></span><h3><a class="toc-backref" href="#id6">Purpose</a><a class="headerlink" href="#purpose" title="Permalink to this headline"></a></h3>
<section id="reduce-memory">
<span id="chkpoint-one-purpose-reduce-memory"></span><span id="index-5"></span><h4><a class="toc-backref" href="#id7">Reduce Memory</a><a class="headerlink" href="#reduce-memory" title="Permalink to this headline"></a></h4>
<p>You can reduce the size of the tape and memory required for AD by
checkpointing functions of the form <span class="math notranslate nohighlight">\(y = f(x)\)</span> where
<span class="math notranslate nohighlight">\(f : \B{R}^n \rightarrow \B{R}^m\)</span>.</p>
</section>
<section id="faster-recording">
<span id="chkpoint-one-purpose-faster-recording"></span><span id="index-6"></span><h4><a class="toc-backref" href="#id8">Faster Recording</a><a class="headerlink" href="#faster-recording" title="Permalink to this headline"></a></h4>
<p>It may also reduce the time to make a recording the same function
for different values of the independent variable.
Note that the operation sequence for a recording that uses <span class="math notranslate nohighlight">\(f(x)\)</span>
may depend on its independent variables.</p>
</section>
<section id="repeating-forward">
<span id="chkpoint-one-purpose-repeating-forward"></span><span id="index-7"></span><h4><a class="toc-backref" href="#id9">Repeating Forward</a><a class="headerlink" href="#repeating-forward" title="Permalink to this headline"></a></h4>
<p>Normally, CppAD store <a class="reference internal" href="Forward.html#forward-name"><span class="std std-ref">Forward</span></a> mode results until they freed
using <a class="reference internal" href="capacity_order.html#capacity-order-name"><span class="std std-ref">capacity_order</span></a> or the corresponding <a class="reference internal" href="ADFun.html#adfun-name"><span class="std std-ref">ADFun</span></a> object is
deleted. This is not true for checkpoint functions because a checkpoint
function may be used repeatedly with different arguments in the same tape.
Thus, forward mode results are recomputed each time a checkpoint function
is used during a forward or reverse mode sweep.</p>
</section>
<section id="restriction">
<span id="chkpoint-one-purpose-restriction"></span><span id="index-8"></span><h4><a class="toc-backref" href="#id10">Restriction</a><a class="headerlink" href="#restriction" title="Permalink to this headline"></a></h4>
<p>The <a class="reference internal" href="glossary.html#glossary-operation-sequence"><span class="std std-ref">operation sequence</span></a>
representing <span class="math notranslate nohighlight">\(f(x)\)</span> cannot depend on the value of <span class="math notranslate nohighlight">\(x\)</span>.
The approach in the <a class="reference internal" href="rev_checkpoint.cpp.html#rev-checkpoint-cpp-name"><span class="std std-ref">rev_checkpoint.cpp</span></a> example case be applied
when the operation sequence depends on <span class="math notranslate nohighlight">\(x\)</span>.</p>
</section>
<section id="multiple-level-ad">
<span id="chkpoint-one-purpose-multiple-level-ad"></span><span id="index-9"></span><h4><a class="toc-backref" href="#id11">Multiple Level AD</a><a class="headerlink" href="#multiple-level-ad" title="Permalink to this headline"></a></h4>
<p>If <em>Base</em> is an AD type, it is possible to record <em>Base</em>
operations.
Note that <em>atom_fun</em> will treat <em>algo</em> as an atomic
operation while recording <code class="docutils literal notranslate"><span class="pre">AD</span></code> &lt; <code class="docutils literal notranslate"><span class="pre">Base</span></code> &gt; operations, but not while
recording <em>Base</em> operations.
See the <code class="docutils literal notranslate"><span class="pre">chkpoint_one_mul_level.cpp</span></code> example.</p>
</section>
</section>
<section id="method">
<span id="chkpoint-one-method"></span><span id="index-10"></span><h3><a class="toc-backref" href="#id12">Method</a><a class="headerlink" href="#method" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">checkpoint</span></code> class is derived from <code class="docutils literal notranslate"><span class="pre">atomic_base</span></code>
and makes this easy.
It implements all the <code class="docutils literal notranslate"><span class="pre">atomic_base</span></code>
<a class="reference internal" href="atomic_two.html#atomic-two-virtual-functions"><span class="std std-ref">Virtual Functions</span></a>
and hence its source code <code class="docutils literal notranslate"><span class="pre">cppad/core/chkpoint_one/chkpoint_one.hpp</span></code>
provides an example implementation of <a class="reference internal" href="atomic_two.html#atomic-two-name"><span class="std std-ref">atomic_two</span></a> .
The difference is that <code class="docutils literal notranslate"><span class="pre">chkpoint_one.hpp</span></code> uses AD
instead of user provided derivatives.</p>
</section>
<section id="constructor">
<span id="chkpoint-one-constructor"></span><span id="index-11"></span><h3><a class="toc-backref" href="#id13">constructor</a><a class="headerlink" href="#constructor" title="Permalink to this headline"></a></h3>
<p>The syntax for the checkpoint constructor is</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">checkpoint&lt;</span></code> <em>Base</em> &gt; <em>atom_fun</em> ( <em>name</em> , <em>algo</em> , <em>ax</em> , <em>ay</em> )</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>This constructor cannot be called in <a class="reference internal" href="ta_in_parallel.html#ta-in-parallel-name"><span class="std std-ref">parallel</span></a> mode.</p></li>
<li><p>You cannot currently be recording
<code class="docutils literal notranslate"><span class="pre">AD&lt;</span></code> <em>Base</em> &gt; operations when the constructor is called.</p></li>
<li><p>This object <em>atom_fun</em> must not be destructed for as long
as any <code class="docutils literal notranslate"><span class="pre">ADFun&lt;</span></code> <em>Base</em> &gt; object uses its atomic operation.</p></li>
<li><p>This class is implemented as a derived class of
<a class="reference internal" href="atomic_two_ctor.html#atomic-two-ctor-atomic-base"><span class="std std-ref">atomic</span></a> and hence
some of its error message will refer to <code class="docutils literal notranslate"><span class="pre">atomic_base</span></code> .</p></li>
</ol>
</section>
<section id="base">
<span id="chkpoint-one-base"></span><span id="index-12"></span><h3><a class="toc-backref" href="#id14">Base</a><a class="headerlink" href="#base" title="Permalink to this headline"></a></h3>
<p>The type <em>Base</em> specifies the base type for AD operations.</p>
</section>
<section id="advector">
<span id="chkpoint-one-advector"></span><span id="index-13"></span><h3><a class="toc-backref" href="#id15">ADVector</a><a class="headerlink" href="#advector" title="Permalink to this headline"></a></h3>
<p>The type <em>ADVector</em> must be a
<a class="reference internal" href="SimpleVector.html#simplevector-name"><span class="std std-ref">simple vector class</span></a> with elements of type
<code class="docutils literal notranslate"><span class="pre">AD&lt;</span></code> <em>Base</em> &gt; .</p>
</section>
<section id="name">
<span id="id1"></span><span id="index-14"></span><h3><a class="toc-backref" href="#id16">name</a><a class="headerlink" href="#name" title="Permalink to this headline"></a></h3>
<p>This <em>checkpoint</em> constructor argument has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span></code> * <em>name</em></p>
</div></blockquote>
<p>It is the name used for error reporting.
The suggested value for <em>name</em> is <em>atom_fun</em> ; i.e.,
the same name as used for the object being constructed.</p>
</section>
<section id="ax">
<span id="chkpoint-one-ax"></span><span id="index-15"></span><h3><a class="toc-backref" href="#id17">ax</a><a class="headerlink" href="#ax" title="Permalink to this headline"></a></h3>
<p>This argument has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">const</span></code> <em>ADVector</em> &amp; <em>ax</em></p>
</div></blockquote>
<p>and size must be equal to <em>n</em> .
It specifies vector <span class="math notranslate nohighlight">\(x \in \B{R}^n\)</span>
at which an <code class="docutils literal notranslate"><span class="pre">AD&lt;</span></code> <em>Base</em> &gt; version of
<span class="math notranslate nohighlight">\(y = f(x)\)</span> is to be evaluated.</p>
</section>
<section id="ay">
<span id="chkpoint-one-ay"></span><span id="index-16"></span><h3><a class="toc-backref" href="#id18">ay</a><a class="headerlink" href="#ay" title="Permalink to this headline"></a></h3>
<p>This argument has prototype</p>
<blockquote>
<div><p><em>ADVector</em> &amp; <em>ay</em></p>
</div></blockquote>
<p>Its input size must be equal to <em>m</em> and does not change.
The input values of its elements do not matter.
Upon return, it is an <code class="docutils literal notranslate"><span class="pre">AD&lt;</span></code> <em>Base</em> &gt; version of
<span class="math notranslate nohighlight">\(y = f(x)\)</span>.</p>
</section>
<section id="sparsity">
<span id="chkpoint-one-sparsity"></span><span id="index-17"></span><h3><a class="toc-backref" href="#id19">sparsity</a><a class="headerlink" href="#sparsity" title="Permalink to this headline"></a></h3>
<p>This argument has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">atomic_base&lt;</span></code> <em>Base</em> &gt;:: <code class="docutils literal notranslate"><span class="pre">option_enum</span></code> <em>sparsity</em></p>
</div></blockquote>
<p>It specifies <a class="reference internal" href="atomic_two_ctor.html#atomic-two-ctor-atomic-base-sparsity"><span class="std std-ref">sparsity</span></a>
in the <code class="docutils literal notranslate"><span class="pre">atomic_base</span></code> constructor and must be either
<code class="docutils literal notranslate"><span class="pre">atomic_base&lt;</span></code> <em>Base</em> &gt;:: <code class="docutils literal notranslate"><span class="pre">pack_sparsity_enum</span></code> ,
<code class="docutils literal notranslate"><span class="pre">atomic_base&lt;</span></code> <em>Base</em> &gt;:: <code class="docutils literal notranslate"><span class="pre">bool_sparsity_enum</span></code> , or
<code class="docutils literal notranslate"><span class="pre">atomic_base&lt;</span></code> <em>Base</em> &gt;:: <code class="docutils literal notranslate"><span class="pre">set_sparsity_enum</span></code> .
This argument is optional and its default value is unspecified.</p>
</section>
<section id="optimize">
<span id="chkpoint-one-optimize"></span><span id="index-18"></span><h3><a class="toc-backref" href="#id20">optimize</a><a class="headerlink" href="#optimize" title="Permalink to this headline"></a></h3>
<p>This argument has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">bool</span></code> <em>optimize</em></p>
</div></blockquote>
<p>It specifies if the recording corresponding to the atomic function
should be <a class="reference internal" href="optimize.html#optimize-name"><span class="std std-ref">optimized</span></a> .
One expects to use a checkpoint function many times, so it should
be worth the time to optimize its operation sequence.
For debugging purposes, it may be useful to use the
original operation sequence (before optimization)
because it corresponds more closely to <em>algo</em> .
This argument is optional and its default value is true.</p>
</section>
<section id="size-var">
<span id="chkpoint-one-size-var"></span><span id="index-19"></span><h3><a class="toc-backref" href="#id21">size_var</a><a class="headerlink" href="#size-var" title="Permalink to this headline"></a></h3>
<p>This <code class="docutils literal notranslate"><span class="pre">size_var</span></code> member function return value has prototype</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">size_t</span></code> <em>sv</em></p>
</div></blockquote>
<p>It is the <a class="reference internal" href="fun_property.html#fun-property-size-var"><span class="std std-ref">size_var</span></a> for the
<code class="docutils literal notranslate"><span class="pre">ADFun&lt;</span></code> <em>Base</em> &gt; object is used to store the operation sequence
corresponding to <em>algo</em> .</p>
</section>
<section id="option">
<span id="chkpoint-one-option"></span><span id="index-20"></span><h3><a class="toc-backref" href="#id22">option</a><a class="headerlink" href="#option" title="Permalink to this headline"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">option</span></code> syntax can be used to set the type of sparsity
pattern used by <em>atom_fun</em> .
This is an <code class="docutils literal notranslate"><span class="pre">atomic_base&lt;</span></code> <em>Base</em> &gt; function and its documentation
can be found at <a class="reference internal" href="atomic_two_option.html#atomic-two-option-name"><span class="std std-ref">atomic_two_option</span></a> .</p>
</section>
<section id="algo">
<span id="chkpoint-one-algo"></span><span id="index-21"></span><h3><a class="toc-backref" href="#id23">algo</a><a class="headerlink" href="#algo" title="Permalink to this headline"></a></h3>
<p>The type of <em>algo</em> is arbitrary, except for the fact that
the syntax</p>
<blockquote>
<div><p><em>algo</em> ( <em>ax</em> , <em>ay</em> )</p>
</div></blockquote>
<p>must evaluate the function <span class="math notranslate nohighlight">\(y = f(x)\)</span> using
<code class="docutils literal notranslate"><span class="pre">AD&lt;</span></code> <em>Base</em> &gt; operations.
In addition, we assume that the
<a class="reference internal" href="glossary.html#glossary-operation-sequence"><span class="std std-ref">operation sequence</span></a>
does not depend on the value of <em>ax</em> .</p>
</section>
<section id="atom-fun">
<span id="chkpoint-one-atom-fun"></span><span id="index-22"></span><h3><a class="toc-backref" href="#id24">atom_fun</a><a class="headerlink" href="#atom-fun" title="Permalink to this headline"></a></h3>
<p>Given <em>ax</em> it computes the corresponding value of <em>ay</em>
using the operation sequence corresponding to <em>algo</em> .
If <code class="docutils literal notranslate"><span class="pre">AD&lt;</span></code> <em>Base</em> &gt; operations are being recorded,
it enters the computation as single operation in the recording
see <a class="reference internal" href="Independent.html#independent-start-recording"><span class="std std-ref">Start Recording</span></a> .
(Currently each use of <em>atom_fun</em> actually corresponds to
<em>m</em> + <em>n</em> +2 operations and creates <em>m</em> new variables,
but this is not part of the CppAD specifications and my change.)</p>
</section>
<section id="memory">
<span id="chkpoint-one-memory"></span><span id="index-23"></span><h3><a class="toc-backref" href="#id25">Memory</a><a class="headerlink" href="#memory" title="Permalink to this headline"></a></h3>
<section id="chkpoint-one-memory-restriction">
<span id="index-24"></span><span id="id2"></span><h4><a class="toc-backref" href="#id26">Restriction</a><a class="headerlink" href="#chkpoint-one-memory-restriction" title="Permalink to this headline"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">clear</span></code> routine cannot be called
while in <a class="reference internal" href="ta_in_parallel.html#ta-in-parallel-name"><span class="std std-ref">parallel</span></a> execution mode.</p>
</section>
</section>
<section id="parallel-mode">
<span id="chkpoint-one-parallel-mode"></span><span id="index-25"></span><h3><a class="toc-backref" href="#id27">Parallel Mode</a><a class="headerlink" href="#parallel-mode" title="Permalink to this headline"></a></h3>
<p>The CppAD checkpoint function delays the caching of certain calculations
until they are needed.
In <a class="reference internal" href="ta_parallel_setup.html#ta-parallel-setup-name"><span class="std std-ref">parallel model</span></a> ,
this may result in <a class="reference internal" href="ta_inuse.html#ta-inuse-name"><span class="std std-ref">thread_alloc::inuse(thread)</span></a>
being non-zero even though the specified thread is no longer active.
This memory will be freed when the checkpoint object is deleted.</p>
<section id="clear">
<span id="chkpoint-one-parallel-mode-clear"></span><span id="index-26"></span><h4><a class="toc-backref" href="#id28">clear</a><a class="headerlink" href="#clear" title="Permalink to this headline"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">atomic_base</span></code> class holds onto static work space
that is not connected to a particular object
(in order to increase speed by avoiding system memory allocation calls).
This call makes to work space <a class="reference internal" href="ta_available.html#ta-available-name"><span class="std std-ref">available</span></a> to
for other uses by the same thread.
This should be called when you are done using the
atomic functions for a specific value of <em>Base</em> .</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="multi_atomic_two_time.html" class="btn btn-neutral float-left" title="multi_atomic_two_time" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="multi_chkpoint_one.cpp.html" class="btn btn-neutral float-right" title="multi_chkpoint_one.cpp" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>